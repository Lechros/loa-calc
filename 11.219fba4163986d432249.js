(()=>{"use strict";const b=["\uacf5\uaca9\ub825 \uac10\uc18c","\uacf5\uaca9\uc18d\ub3c4 \uac10\uc18c","\ubc29\uc5b4\ub825 \uac10\uc18c","\uc774\ub3d9\uc18d\ub3c4 \uac10\uc18c"];function h(t,e){const n=Object.assign({},t);return Object.entries(e).forEach(([c,o])=>{n[c]||(n[c]=0),n[c]+=o}),n}function j(t,e,n,c,o){return function a(u,r,i,l,f){if(function(u){return b.find(r=>{var i;return u[r]>=5*Math.floor((null!==(i=n[r])&&void 0!==i?i:0)/5+1)})}(u)||r>c)return[];if(5===f)return function(u){return Object.keys(o).find(r=>u[r]<o[r])}(u)?[]:[{effects:u,price:r,items:l}];const O=[],v=t[f],E=e[f];for(const m of v)i[m.name]||O.push(...a(h(u,m.effects),r+m.price,Object.assign(Object.assign({},i),{[m.name]:!0}),Object.assign(Object.assign({},l),{[E]:m}),f+1));return O}(n,0,{},{},0)}function _(t){return JSON.stringify(Object.values(t.items).sort((e,n)=>e.name.localeCompare(n.name)))}addEventListener("message",({data:t})=>{const e=function(t,e,n,c){const o=function(t){const e=[],n=(c,o=[])=>{if(0===c.length)e.push(o);else for(let s=0;s<c.length;s++){let p=c.slice(),a=p.splice(s,1);n(p.slice(),o.concat(a))}};return n(["\ubaa9\uac78\uc774","\uadc0\uac78\uc7741","\uadc0\uac78\uc7742","\ubc18\uc9c01","\ubc18\uc9c02"]),e}();let s=[];for(const p of t)for(const a of o){const u=[];for(let r=0;r<5;r+=1){const i=a[r],l=Object.entries(p[r]),f=n[`${l[0][0]}_${l[0][1]}_${l[1][0]}_${l[1][1]}_${i}`];f.length>0&&u.push(f)}if(5===u.length){s.push(...j(u,a,e,s.length?s[s.length-1].price:1/0,c));const r={};s.forEach(i=>{r[_(i)]=i}),s=Object.values(r),s.sort((i,l)=>i.price-l.price),s=s.slice(0,300)}}return s}(t.combinations,t.initialEffect,t.searchResult,t.filter);postMessage(e)})})();